## finnegan/cds-api

[![License](http://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square)](https://tldrlegal.com/license/mit-license)

FinneganCDS is a web Content Design System built on top of [Laravel framework](http://laravel.com).

## Installation

Add the repository to your composer.json:
```json
{
    "repositories":
    [
        {
            "type":"vcs",
            "url":"git@gitlab.test5.hce.it:finnegan/extensions/cds-api.git"
        }
    ]
}
```

Install the package:
```bash
composer require finnegan/cds-api
```

Publish configuration and assets
```bash
php artisan vendor:publish --provider=Finnegan\\Api\\ApiServiceProvider
```

## Configuration

### Standard endpoints
WIP

### Aggregate resources endpoint
An aggregate endpoint is an API endpoint that returns a mixed collection of resources, combining both Eloquent models 
and data generated by Closures.

> **Note:** closures require a non-numeric array key. See the example below.

```php
Api::aggregate ( 'aggregate/uri', [
    'App\\Page',
    'App\\Post',
    'settings' => function ( SettingStore $settings ) {
        return $settings->all ();
    },
 ] );
```

#### Customize the response
If you use custom [API Resources](https://laravel.com/docs/5.5/eloquent-resources) to personalize the API data you
can define the following methods on the very same model in order the provide the right resource to the API server.

```php
public function toApiResource ( $resource )
{
    return new MyCustomResource ( $resource );
}


public function toApiResourceCollection ( $resource )
{
    return new MyCustomResourceCollection ( $resource );
}
```

## Swagger compatibility
WIP

## License

[FinneganCDS](https://gitlab.test5.hce.it/finnegan/extensions) and its extensions are open-sourced software licensed 
under the [MIT license](http://opensource.org/licenses/MIT).
